---
import Layout from "../../layouts/Layout.astro";
import SEO from "../../components/SEO.astro";
import { getCollection } from "astro:content";

const wins = (await getCollection("wins"))
  .sort((a, b) => +new Date(b.data.date) - +new Date(a.data.date));
---
<Layout title="Systems Wins — SMooks" description="Measurable, repeatable improvements with data and governance." currentPath="/system-wins">
  <SEO title="Systems Wins — SMooks" description="Evidence-backed case studies of systems change." />
  <h1 class="text-3xl font-semibold mb-6">Systems Wins</h1>

  <ul class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {wins.map((entry) => (
      <li class="rounded-2xl border border-white/10 p-5 hover:border-white/20 transition">
        <a
          href={`/system-wins/${entry.slug}`}
          class="block"
          aria-label={`Read case study: ${entry.data.title}`}
        >
          <h2 class="text-xl font-semibold mb-2">{entry.data.title}</h2>
          <p class="text-sm text-zinc-400 mb-3">
            {new Date(entry.data.date).toLocaleDateString("en-GB")}
          </p>
          <p class="text-zinc-200 mb-4">{entry.data.summary}</p>
          <div class="flex flex-wrap gap-2">
            {entry.data.tags?.map(t => (
              <span class="text-xs px-2 py-1 rounded-full bg-white/10">{t}</span>
            ))}
          </div>
        </a>
      </li>
    ))}
  </ul>
</Layout>
