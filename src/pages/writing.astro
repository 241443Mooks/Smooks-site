
---
// src/pages/writing.astro
import Layout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const articles = await getCollection("articles");
const title = "Writing";
const description = "Articles and reflections.";
---
<Layout {title} {description} currentPath={Astro.url.pathname}>
  <section class="mx-auto max-w-6xl">
    <h1 class="text-3xl md:text-4xl font-semibold">Writing</h1>
    <p class="text-zinc-400 mt-2 max-w-3xl">Essays, reflections, and cross-posts.</p>

    {articles.length === 0 ? (
      <div class="mt-8 rounded-xl border border-white/10 p-6 text-zinc-400">
        No articles yet. Add MDX in <code class="text-zinc-300">src/content/articles</code>.
      </div>
    ) : (
      <ul class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-4">
        {articles
          .sort((a, b) => (b.data.date ?? "").localeCompare(a.data.date ?? ""))
          .map((a) => (
            <li class="rounded-2xl border border-white/10 p-5 hover:border-white/20">
              <a class="block hover:underline" href={`/writing/${a.slug}`}>
                <h2 class="text-lg font-medium">{a.data.title}</h2>
                {a.data.summary && <p class="text-sm text-zinc-400 mt-1">{a.data.summary}</p>}
              </a>
              {a.data.tags?.length > 0 && (
                <div class="mt-3 flex flex-wrap gap-2">
                  {a.data.tags.map((t: string) => (
                    <span class="text-[11px] px-2 py-1 rounded-full bg-white/5 border border-white/10">{t}</span>
                  ))}
                </div>
              )}
            </li>
          ))}
      </ul>
    )}
  </section>
</Layout>
