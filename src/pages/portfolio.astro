---
import { getCollection } from "astro:content";

const all = await getCollection("portfolio", ({ data }) => data.published !== false);
const items = all
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<html lang="en">
  <head><title>Portfolio — SMooks</title></head>
  <body class="mx-auto max-w-5xl px-4 py-10">
    <h1 class="text-3xl font-bold mb-6">Portfolio</h1>

    <!-- Filters (optional stub, safe to add later) -->

    <section class="grid gap-6 md:grid-cols-2">
      {items.map(({ data, slug, id }) => (
        <article class="rounded-2xl border p-5 shadow-sm" id={id}>
          <header class="mb-3">
            <h2 class="text-xl font-semibold">{data.title}</h2>
            <p class="text-sm opacity-70">
              {new Intl.DateTimeFormat('en-GB',{dateStyle:'medium'}).format(data.date)}
              · {data.type} · {data.streams?.join(" / ")}
            </p>
          </header>
          <p class="mb-4">{data.summary}</p>
          <div class="flex flex-wrap gap-2 text-sm">
            {data.tags?.map(t => <span class="rounded-full border px-2 py-0.5">{t}</span>)}
          </div>
        </article>
      ))}
    </section>
  </body>
</html>

